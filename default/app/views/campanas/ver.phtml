<div style="text-align:center;">
    <h1 style="font-size:3rem; font-weight:bold; text-transform:uppercase; line-height:1.1; margin:0; color:#4B2E2E;">
        CAMPAÑA: <?= htmlspecialchars($campana->nombre) ?>
    </h1>
    <h2 style="font-size:2rem; font-weight:bold; margin:0; color:#D8A5AB;">
        SAN JUAN DEL RÍO
    </h2>
</div>

<style>
    .info-table {
        width: 100%;
        max-width: 600px;
        border-collapse: separate;
        border-spacing: 0 8px;
        font-family: Arial, sans-serif;
        margin: 20px auto;
    }

    .info-table td {
        padding: 12px 16px;
        background-color: #f5f5f5;
        border-radius: 6px;
    }

    .info-table tr td:first-child {
        font-weight: bold;
        background-color: #e0e0e0;
        width: 150px;
    }

    .info-table tr td:last-child {
        background-color: #f9f9f9;
    }

    .info-table tr:hover td {
        background-color: #d3e0d3;
        transition: background-color 0.3s;
    }
</style>

<table class="info-table">
    <tbody>
    <tr><td>Descripción</td><td><?= $campana->descripcion ?></td></tr>
    <tr><td>Tipo</td><td><?= ucfirst($campana->tipo) ?></td></tr>
    <tr><td>Fecha Inicio</td><td><?= $campana->fecha_inicio ?></td></tr>
    <tr><td>Fecha Fin</td><td><?= $campana->fecha_fin ?></td></tr>
    <tr><td>Estado</td><td><?= $campana->estado ? 'Activa' : 'Inactiva' ?></td></tr>
    </tbody>
</table>

<!-- Botones alineados a la izquierda -->
<div class="mb-2 text-start">
    <?= Html::link("campanas/editar/{$campana->id}", "Editar", ["class"=>"btn", "style"=>"background-color:#4B2E2E; color:white; border:none; padding:0.5rem 1rem; border-radius:6px;"]) ?>
    <?= Html::link("campanas/index", "Inicio", ["class"=>"btn", "style"=>"background-color:#C79CA0; color:white; border:none; padding:0.5rem 1rem; border-radius:6px;"]) ?>
</div>

<h2 style="text-align:center; font-size:2rem; font-weight:bold; color:#4B2E2E; margin-top:2rem;">
    DONACIONES / HISTORIAS DE IMPACTO RELACIONADAS
</h2>

<?php if (!empty($relaciones)): ?>
    <table class="info-table" style="max-width:800px; margin:0 auto;">
        <thead>
        <tr>
            <th style="background-color:#7A9E7E; color:white; padding:12px 16px; border-radius:6px 6px 0 0;">Folio</th>
            <th style="background-color:#7A9E7E; color:white; padding:12px 16px;">Donador / Autor</th>
            <th style="background-color:#7A9E7E; color:white; padding:12px 16px;">Cantidad</th>
            <th style="background-color:#7A9E7E; color:white; padding:12px 16px;">Tipo</th>
            <th style="background-color:#7A9E7E; color:white; padding:12px 16px;">Fecha</th>
            <th style="background-color:#7A9E7E; color:white; padding:12px 16px; border-radius:6px 6px 0 0;">Acciones</th>
        </tr>
        </thead>
        <tbody>
        <?php foreach($relaciones as $rel): ?>
            <tr style="background-color:#FAF5EE; transition: background-color 0.3s; border-radius:6px;">
                <td style="padding:10px; color:#4B2E2E; font-weight:bold;"><?= $rel->id ?></td>
                <td style="padding:10px; color:#4B2E2E;"><?= $rel->donador ? $rel->donador->nombre : "Sin asignar" ?></td>
                <td style="padding:10px; color:#4B2E2E;"><?= $rel->cantidad ?? "-" ?></td>
                <td style="padding:10px; color:#4B2E2E;"><?= $rel->tipo ?? "-" ?></td>
                <td style="padding:10px; color:#4B2E2E;"><?= $rel->fecha ?? "-" ?></td>
                <!-- Contador de personas que donaron y botón Unirme -->
                <td style="padding:10px; text-align:center;">
                    <span style="font-weight:bold;">
                        <?= $rel->corazones ?? 0 ?>
                    </span>
                    <br>
                    <?= Html::link("/campanas/unirse/{$rel->id}", "Unirme", [
                        "class"=>"btn",
                        "style"=>"background-color:#7A9E7E; color:white; border:none; padding:0.3rem 0.6rem; border-radius:4px; margin-top:4px;"
                    ]) ?>
                </td>
            </tr>
        <?php endforeach; ?>
        </tbody>
    </table>
<?php else: ?>
    <p style="text-align:center; font-style:italic; color:#5E3C2C; margin-top:1rem;">
        Esta campaña no tiene donaciones o historias de impacto registradas.
    </p>
<?php endif; ?>



